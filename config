[init]
	# Don't be woke.
	defaultBranch = master
[user]
	email = doron.behar@gmail.com
	name = Doron Behar
[core]
	editor =
	pager = less -r
	whitespace = -space-before-tab,-indent-with-non-tab,-blank-at-eol,-blank-at-eof
	precomposeunicode = true
	quotePath = false
[credential]
	helper = cache --timeout=300
[credential "https://github.com"]
	username = doronbehar
[credential "https://bitbucket.com"]
	username = doronbehar
[credential "https://gitlab.com"]
	username = doronbehar
[credential "https://review.jami.net/"]
	username = doronbehar
[difftool "nvim-fugitive"]
	cmd = nvim -c "Gdiff" "$MERGED"
[difftool "nvimdiff"]
	cmd = nvim -d "$MERGED" "$LOCAL"
[diff]
	tool = nvimdiff
	mnemonicprefix = true
	submodule = log
[mergetool "nvimdiff"]
	cmd = nvim -d -O \"$BASE\" \"$REMOTE\" \"$LOCAL\" \"$MERGED\"
[mergetool "nvim-fugitive"]
	cmd = nvim -c "Gmerge" "$MERGED"
[merge]
	tool = nvimdiff
	conflictstyle = diff3
	stat = true
	summary = true
	renameLimit = 4000
[alias]
	# general
	co = checkout
	cp = cherry-pick
	cmt = commit
	st = status
	br = branch
	ls = ls-files
	rst = reset
	# merge and diff tools
	m = mergetool
	d = difftool
	dc = difftool --cached
	diffc = diff --cached
	# log
	l = log --decorate --graph
	lg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
	grog = log --graph --abbrev-commit --decorate --all \n--format=format:\"%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(dim white) - %an%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n %C(white)%s%C(reset)\"
	logg = "!f() { \
		git --no-pager log --graph --decorate $@ --color=always | \
		env LESS='' less -R -S;\
	}; f"
	# special
	commend = commit --amend --no-edit
	shorty = status --short --branch
	# git-repo
	lab = repo lab
	hub = repo hub
	# forward and backwards in a commit log
	fwd = "!f() { \
		git log --reverse --pretty=%H ${1:-master} | \
		grep -A 1 $(git rev-parse HEAD) | \
		tail -n1 | \
		xargs git checkout;\
	}; f"
	prev = checkout HEAD~1
	# retrieve a git ignore list from gitignore.io/api
	ignore = "!f() { \
		curl -L -s https://www.gitignore.io/api/$@;\
	}; f"
	wdiff = diff --word-diff
	# my version for send-email which utilizes password from passwordstore
	send-mail = "!f() { \
		git send-email --smtp-pass=\"$(gopass show -f software/desktop/gmail-mutt)\" ${GIT_SEND_MAIL_TO:+--to=${GIT_SEND_MAIL_TO}} $@;\
	}; f"
	# fzf based shortcuts using git-fzf (https://gitlab.com/doronbehar/git-fzf)
	flog = fzf log
	fstash = fzf stash
	fco = "!f() {\
		git checkout $(git flog); \
	}; f"
	frebase = "!f() {\
		git rebase --autosquash --interactive $(git flog)^; \
	}; f"
	# Based a bit upon https://stackoverflow.com/a/75826370/4935114 . In a big
	# sh script that needs to perform such checks, the `git-sh-setup` bash
	# script located in $GIT_EXEC_DIR has such functions. This implementation
	# also filters out files not tracked at all, using `tr -d '?'`.
	ffixup = "!f() {\
		if [[ $(git status -z | cut -z -b 2 | tr -d '?' | tr -d '[:space:]\\000') ]]; then\
			echo git-ffixup: Will not perform fixup with changes in the worktree 1>&2;\
			exit 2;\
		else\
			CMT_HASH=$(git flog);\
			git commit --fixup=${CMT_HASH} && git rebase --interactive --autosquash ${CMT_HASH}^ \"$@\";\
		fi;\
	}; f"
[pager]
	stash = false
[push]
	default = simple
[url "ssh://git@codeberg.org/"]
	pushInsteadOf = https://codeberg.org/
[url "ssh://git@github.com/"]
	pushInsteadOf = https://github.com/
	pushInsteadOf = "gh:"
[url "https://github.com/"]
	insteadOf = "gh:"
[url "https://gitlab.com/"]
	insteadOf = "gl:"
[url "ssh://git@gitlab.com/"]
	pushInsteadOf = https://gitlab.com/
	pushInsteadOf = "gl:"
[url "ssh://git@gitlab.gnome.org/"]
	pushInsteadOf = https://gitlab.gnome.org/
[url "ssh://git@invent.kde.org/"]
	pushInsteadOf = https://invent.kde.org/
[url "https://bitbucket.org/"]
	insteadOf = "bb:"
[url "ssh://git@bitbucket.org/"]
	pushInsteadOf = https://bitbucket.org/
	pushInsteadOf = "bb:"
[url "https://aur.archlinux.org/"]
	insteadOf = "aur:"
[url "ssh://aur@aur.archlinux.org/"]
	pushInsteadOf = https://aur.archlinux.org/
	pushInsteadOf = "aur:"
[url "ssh://doronbehar@review.jami.net/"]
	pushInsteadOf = https://review.jami.net/
[status]
	submodulesummary = true
	showUntrackedFiles = all
	relativePaths = true
[sendemail]
	smtpEncryption = tls
	smtpServer = smtp.gmail.com
	smtpUser = doron.behar
	from = doron.behar@gmail.com
	smtpServerPort = 587
	suppresscc = author
[imap]
	folder = "[Gmail]/Drafts"
	host = imaps://imap.gmail.com
	user = doron.behar@gmail.com
	port = 993
	sslverify = false
[apply]
	ignorewhitespace = change
	whitespace = fix
# Local configuration:
[include]
	path = ~/.local/share/git/config
[color]
	ui = true
[color "diff-highlight"]
	oldNormal = red bold
	oldHighlight = red bold 52
	newNormal = green bold
	newHighlight = green bold 22
[color "diff"]
	meta = yellow
	frag = magenta bold
	commit = yellow bold
	old = red bold
	new = green bold
	whitespace = red reverse
[diff-so-fancy]
	stripLeadingSymbols = false
[protocol]
	version = 2
[pull]
	rebase = true
[checkout]
	defaultRemote = origin
[filter "lfs"]
	process = git-lfs filter-process
	required = true
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
